<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clonagem de Imagem</title>
    <style>
        body {
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            position: relative; /* Adicionado position relative ao body para posicionar imagens de acordo com ele */
        }

        .clonavel {
            position: absolute;
        }

        #imagemOriginal {
            position: relative;
            z-index: 0; /* Garante que a imagem apareça sobre a área proibida */
            border: 2px solid transparent; /* Adiciona uma borda transparente inicialmente */
            cursor: pointer; /* Muda o cursor para indicar que é clicável */
        }
    </style>
</head>

<body onclick="clicar(event)">
    <div id="areaProibida" onclick="alternarClonagem()"></div>
    <button id="imagemOriginal" class="clonavel" onclick="alternarClonagem(event)">
        <img src="/img/X - fraturas.svg" alt="Imagem" style="pointer-events:none;">
    </button>
    <script>
        let clicouNaImagem = false;
        let areaProibida = document.getElementById('areaProibida');
        let imagemOriginal = document.getElementById('imagemOriginal');

        function alternarClonagem(event) {
            clicouNaImagem = !clicouNaImagem;
            if (clicouNaImagem) {
                imagemOriginal.style.border = '2px solid blue'; /* Adiciona uma borda azul quando a clonagem está ativada */
            } else {
                imagemOriginal.style.border = '2px solid transparent'; /* Remove a borda quando a clonagem é desativada */
            }
            event.stopPropagation(); // Impede a propagação do evento para a área proibida
        }

        function clicar(event) {
            const rect = areaProibida.getBoundingClientRect();
            const dentroDosLimitesX = event.clientX >= rect.left && event.clientX <= rect.right;
            const dentroDosLimitesY = event.clientY >= rect.top && event.clientY <= rect.bottom;

            if (clicouNaImagem && !dentroDosLimitesX && !dentroDosLimitesY) {
                const clone = imagemOriginal.cloneNode(true);
                const posX = event.clientX - imagemOriginal.offsetWidth / 2;
                const posY = event.clientY - imagemOriginal.offsetHeight / 2;
                clone.style.position = 'absolute';
                clone.style.left = posX + 'px';
                clone.style.top = posY + 'px';
                clone.style.border = 'none'; /* Remove a borda da imagem clonada */
                clone.addEventListener('click', function () {
                    document.body.removeChild(clone);
                });
                document.body.appendChild(clone);
            }
        }
    </script>
</body>

</html>